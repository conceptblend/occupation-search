{"version":3,"sources":["components/OccupationSearch.jsx","components/FuseSearch.jsx"],"names":["resultRenderer","props","title","description","matchType","key","className","OccupationSearch","useState","isLoading","setIsLoading","query","setQuery","results","setResults","selectedOccupation","setSelectedOccupation","Field","fluid","input","icon","iconPosition","loading","onResultSelect","e","result","onSearchChange","_","debounce","value","setTimeout","length","queryFn","leading","header","meta","defaultProps","FuseSearch","undefined","source","Error","fuse","Fuse","shouldSort","includeScore","includeMatches","threshold","location","distance","minMatchCharLength","keys","name","weight","search","map","numMatches","matches","desc","slice","entry","join","item","nocTitle","nocCode","nocLevel"],"mappings":"wLAMMA,EAAiB,SAACC,GAAW,IACzBC,EAAuBD,EAAvBC,MAAOC,EAAgBF,EAAhBE,YACTC,EAAYH,EAAM,kBAExB,MAAO,CACL,yBAAKI,IAAI,WACNH,GAAS,yBAAKI,UAAU,SAASJ,GACrB,aAAZE,GAA0BD,GAAe,yBAAKG,UAAU,eAAeH,MAWxEI,EAAmB,SAACN,GAAW,IAAD,EACAO,oBAAS,GADT,mBAC3BC,EAD2B,KAChBC,EADgB,OAERF,mBAAS,IAFD,mBAE3BG,EAF2B,KAEpBC,EAFoB,OAGJJ,mBAAS,IAHL,mBAG3BK,EAH2B,KAGlBC,EAHkB,OAIkBN,mBAAS,IAJ3B,mBAI3BO,EAJ2B,KAIPC,EAJO,KA6BlC,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAKC,MAAN,KACE,mFACA,kBAAC,IAAD,CACEC,OAAK,EACLC,MAAO,CAAEC,KAAM,SAAUC,aAAc,QACvCC,QAASb,EACTc,eA1BiB,SAACC,EAAD,GAAqB,IAAfC,EAAc,EAAdA,OAC/Bb,EAAS,IACTI,EAAsBS,IAyBdC,eAAgBC,IAAEC,UAtBD,SAACJ,EAAD,GAAmB,IAAbK,EAAY,EAAZA,MAC/BnB,GAAa,GACbE,EAASiB,GAETC,YAAW,WACT,GAAID,EAAME,OAAS,EAAG,OAfxBrB,GAAa,GACbE,EAAS,SACTE,EAAW,IAcTJ,GAAa,GACbI,EAAWb,EAAM+B,QAAQH,MACxB,OAcoD,IAAK,CAClDI,SAAS,IAEXpB,QAASA,EACTb,eAAgBA,EAChB6B,MAAOlB,MAIXI,EAAmBb,OACnB,kBAAC,IAAD,CACEgB,OAAK,EACLf,YAAaY,EAAmBZ,YAChC+B,OAAQnB,EAAmBb,MAC3BiC,KAAMpB,EAAmBoB,SAUnC5B,EAAiB6B,aAAe,GAEjB7B,O,iCCzFf,6CA0De8B,UApDI,SAACpC,GAClB,QAAqBqC,IAAjBrC,EAAMsC,OAAsB,MAAM,IAAIC,MAAM,kCAEhD,IAAMC,EAAO,IAAIC,IACfzC,EAAMsC,OACN,CACEI,YAAY,EACZC,cAAc,EACdC,gBAAgB,EAChBC,UAAW,GACXC,SAAU,EACVC,SAAU,GACVC,mBAAoB,EACpBC,KAAM,CAAC,CACLC,KAAM,WACNC,OAAQ,KACR,CACAD,KAAM,WACNC,OAAQ,OAyBd,OACE,kBAAC,IAAD,CAAkB/C,IAAI,OAAO2B,QArBb,SAACrB,GAEjB,OAAO8B,EAAKY,OAAO1C,GAAO2C,KACxB,SAAA7B,GACE,IAAM8B,EAAa9B,EAAO+B,QAAQzB,OAE5B0B,EAAOhC,EAAO+B,QACjBE,MAAM,EAFU,GAGhBJ,KAAI,SAAAK,GAAK,OAAIA,EAAM9B,SACnB+B,KAAK,OAASL,EAJE,EAIF,kBAAqCA,EAJnC,EAIF,SAAoE,IAErF,MAAO,CACLrD,MAAOuB,EAAOoC,KAAKC,SACnB3D,YAAasD,EACbtB,KAAK,QAAD,OAAUV,EAAOoC,KAAKE,QAAtB,qBAA0CtC,EAAOoC,KAAKG,UAC1D,iBAAkB","file":"static/js/4.bfa657fb.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from 'prop-types'\nimport { Search, Form, Card } from \"semantic-ui-react\";\nimport _ from 'lodash'\n\n\nconst resultRenderer = (props) => {\n  const { title, description } = props;\n  const matchType = props['data-matchtype'];\n\n  return [\n    <div key='content'>\n      {title && <div className='title'>{title}</div>}\n      {matchType==='isolated' && description && <div className='description'>{description}</div>}\n    </div>\n  ];\n}\n\nresultRenderer.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string,\n}\n\n\nconst OccupationSearch = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [selectedOccupation, setSelectedOccupation] = useState({});\n\n  const resetState = () => {\n    setIsLoading(false);\n    setQuery('');\n    setResults([]);\n  }\n\n  const handleResultSelect = (e, { result }) =>  {\n    setQuery(''); //result.nocTitle\n    setSelectedOccupation(result);\n  }\n\n  const handleSearchChange = (e, { value }) => {\n    setIsLoading(true);\n    setQuery(value);\n\n    setTimeout(() => {\n      if (value.length < 1) return resetState()\n      setIsLoading(false)\n      setResults(props.queryFn(value))\n    }, 300)\n  }\n  \n\n  return (\n    <>\n      <Form>\n        <Form.Field>\n          <label>Type your job title and select the closest match</label>\n          <Search\n            fluid\n            input={{ icon: 'search', iconPosition: 'left' }}\n            loading={isLoading}\n            onResultSelect={handleResultSelect}\n            onSearchChange={_.debounce(handleSearchChange, 500, {\n              leading: true\n            })}\n            results={results}\n            resultRenderer={resultRenderer}\n            value={query}\n          />\n        </Form.Field>\n      </Form>\n      { selectedOccupation.title && \n        <Card\n          fluid\n          description={selectedOccupation.description}\n          header={selectedOccupation.title}\n          meta={selectedOccupation.meta}\n        />\n      }\n    </>\n  );\n};\n\nOccupationSearch.propTypes = {\n  queryFn: PropTypes.func.isRequired,\n}\nOccupationSearch.defaultProps = {}\n\nexport default OccupationSearch;","import React from \"react\";\nimport PropTypes from 'prop-types'\nimport Fuse from 'fuse.js'\nimport OccupationSearch from './OccupationSearch'\n\n\nconst FuseSearch = (props) => {\n  if (props.source === undefined) throw new Error('FuseSearch requires a \"source\"');\n\n  const fuse = new Fuse(\n    props.source, // \"source\" is the item array\n    {\n      shouldSort: true,\n      includeScore: true,\n      includeMatches: true,\n      threshold: 0.2,\n      location: 0,\n      distance: 60,\n      minMatchCharLength: 3,\n      keys: [{\n        name: \"nocTitle\",\n        weight: .99,\n      },{\n        name: \"examples\",\n        weight: 0.3,\n      }]\n    }\n  );\n\n  const queryFunc = (query) => {\n    //console.log(fuse.search(query));\n    return fuse.search(query).map(\n      result => {\n        const numMatches = result.matches.length;\n        const maxMatches = 5;\n        const desc = result.matches\n          .slice(0,maxMatches)\n          .map(entry => entry.value)\n          .join(', ') + (numMatches > maxMatches ? `... and ${numMatches-maxMatches} more` : '');\n\n        return {\n          title: result.item.nocTitle,\n          description: desc,//result.item.combinedExamples,\n          meta: `Code ${result.item.nocCode} -- Level ${result.item.nocLevel}`,\n          'data-matchtype': 'isolated',\n        } // Mapping makes the consuming resultRender not dump all the props on the DOM\n      }\n    )\n  }\n  return (\n    <OccupationSearch key='fuse' queryFn={queryFunc} />\n  );\n};\n\nFuseSearch.propTypes = {\n  source: PropTypes.array.isRequired,\n}\n\nexport default FuseSearch;"],"sourceRoot":""}