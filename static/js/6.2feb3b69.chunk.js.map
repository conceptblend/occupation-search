{"version":3,"sources":["components/OccupationSearch.jsx","components/TextSearch.jsx"],"names":["resultRenderer","props","title","description","matchType","key","className","OccupationSearch","useState","isLoading","setIsLoading","query","setQuery","results","setResults","selectedOccupation","setSelectedOccupation","Field","fluid","input","icon","iconPosition","loading","onResultSelect","e","result","onSearchChange","_","debounce","value","setTimeout","length","queryFn","leading","header","meta","defaultProps","TextSearch","undefined","source","Error","_source","resultSort","resultA","resultB","nocTitle","localeCompare","re","RegExp","escapeRegExp","map","filter","test","combinedExamples","sort","nocCode","nocLevel"],"mappings":"wLAMMA,EAAiB,SAACC,GAAW,IACzBC,EAAuBD,EAAvBC,MAAOC,EAAgBF,EAAhBE,YACTC,EAAYH,EAAM,kBAExB,MAAO,CACL,yBAAKI,IAAI,WACNH,GAAS,yBAAKI,UAAU,SAASJ,GACrB,aAAZE,GAA0BD,GAAe,yBAAKG,UAAU,eAAeH,MAWxEI,EAAmB,SAACN,GAAW,IAAD,EACAO,oBAAS,GADT,mBAC3BC,EAD2B,KAChBC,EADgB,OAERF,mBAAS,IAFD,mBAE3BG,EAF2B,KAEpBC,EAFoB,OAGJJ,mBAAS,IAHL,mBAG3BK,EAH2B,KAGlBC,EAHkB,OAIkBN,mBAAS,IAJ3B,mBAI3BO,EAJ2B,KAIPC,EAJO,KA6BlC,OACE,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAKC,MAAN,KACE,mFACA,kBAAC,IAAD,CACEC,OAAK,EACLC,MAAO,CAAEC,KAAM,SAAUC,aAAc,QACvCC,QAASb,EACTc,eA1BiB,SAACC,EAAD,GAAqB,IAAfC,EAAc,EAAdA,OAC/Bb,EAAS,IACTI,EAAsBS,IAyBdC,eAAgBC,IAAEC,UAtBD,SAACJ,EAAD,GAAmB,IAAbK,EAAY,EAAZA,MAC/BnB,GAAa,GACbE,EAASiB,GAETC,YAAW,WACT,GAAID,EAAME,OAAS,EAAG,OAfxBrB,GAAa,GACbE,EAAS,SACTE,EAAW,IAcTJ,GAAa,GACbI,EAAWb,EAAM+B,QAAQH,MACxB,OAcoD,IAAK,CAClDI,SAAS,IAEXpB,QAASA,EACTb,eAAgBA,EAChB6B,MAAOlB,MAIXI,EAAmBb,OACnB,kBAAC,IAAD,CACEgB,OAAK,EACLf,YAAaY,EAAmBZ,YAChC+B,OAAQnB,EAAmBb,MAC3BiC,KAAMpB,EAAmBoB,SAUnC5B,EAAiB6B,aAAe,GAEjB7B,O,iCCzFf,sDAmCe8B,UA9BI,SAACpC,GAClB,QAAqBqC,IAAjBrC,EAAMsC,OAAsB,MAAM,IAAIC,MAAM,kCAEhD,IAAMC,EAAUxC,EAAMsC,OAGhBG,EAAa,SAACC,EAASC,GAAV,OAAuBD,EAAQE,SAAUC,cAAcF,EAAQC,WAelF,OACE,kBAAC,IAAD,CAAkBxC,IAAI,OAAO2B,QAdb,SAACrB,GACjB,IAAMoC,EAAK,IAAIC,OAAOrB,IAAEsB,aAAatC,GAAQ,KAG7C,OAAOgB,IAAEuB,IACPvB,IAAEwB,OAAOV,GAHK,SAAChB,GAAD,OAAasB,EAAGK,KAAK3B,EAAOoB,WAAaE,EAAGK,KAAK3B,EAAO4B,qBAG3CC,KAAKZ,IAChC,SAAAjB,GAAW,MAAO,CAChBvB,MAAOuB,EAAOoB,SACd1C,YAAasB,EAAO4B,iBACpBlB,KAAK,QAAD,OAAUV,EAAO8B,QAAjB,qBAAqC9B,EAAO+B","file":"static/js/6.2feb3b69.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport PropTypes from 'prop-types'\nimport { Search, Form, Card } from \"semantic-ui-react\";\nimport _ from 'lodash'\n\n\nconst resultRenderer = (props) => {\n  const { title, description } = props;\n  const matchType = props['data-matchtype'];\n\n  return [\n    <div key='content'>\n      {title && <div className='title'>{title}</div>}\n      {matchType==='isolated' && description && <div className='description'>{description}</div>}\n    </div>\n  ];\n}\n\nresultRenderer.propTypes = {\n  title: PropTypes.string,\n  description: PropTypes.string,\n}\n\n\nconst OccupationSearch = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [selectedOccupation, setSelectedOccupation] = useState({});\n\n  const resetState = () => {\n    setIsLoading(false);\n    setQuery('');\n    setResults([]);\n  }\n\n  const handleResultSelect = (e, { result }) =>  {\n    setQuery(''); //result.nocTitle\n    setSelectedOccupation(result);\n  }\n\n  const handleSearchChange = (e, { value }) => {\n    setIsLoading(true);\n    setQuery(value);\n\n    setTimeout(() => {\n      if (value.length < 1) return resetState()\n      setIsLoading(false)\n      setResults(props.queryFn(value))\n    }, 300)\n  }\n  \n\n  return (\n    <>\n      <Form>\n        <Form.Field>\n          <label>Type your job title and select the closest match</label>\n          <Search\n            fluid\n            input={{ icon: 'search', iconPosition: 'left' }}\n            loading={isLoading}\n            onResultSelect={handleResultSelect}\n            onSearchChange={_.debounce(handleSearchChange, 500, {\n              leading: true\n            })}\n            results={results}\n            resultRenderer={resultRenderer}\n            value={query}\n          />\n        </Form.Field>\n      </Form>\n      { selectedOccupation.title && \n        <Card\n          fluid\n          description={selectedOccupation.description}\n          header={selectedOccupation.title}\n          meta={selectedOccupation.meta}\n        />\n      }\n    </>\n  );\n};\n\nOccupationSearch.propTypes = {\n  queryFn: PropTypes.func.isRequired,\n}\nOccupationSearch.defaultProps = {}\n\nexport default OccupationSearch;","import React from \"react\";\nimport PropTypes from 'prop-types'\nimport _ from 'lodash'\nimport OccupationSearch from './OccupationSearch'\n\nconst TextSearch = (props) => {\n  if (props.source === undefined) throw new Error('TextSearch requires a \"source\"');\n\n  const _source = props.source;\n  \n  \n  const resultSort = (resultA, resultB) => (resultA.nocTitle).localeCompare(resultB.nocTitle)\n\n  const queryFunc = (query) => {\n    const re = new RegExp(_.escapeRegExp(query), 'i')\n    const isMatch = (result) => (re.test(result.nocTitle) || re.test(result.combinedExamples))\n\n    return _.map(\n      _.filter(_source, isMatch).sort(resultSort),\n      result => {return {\n        title: result.nocTitle,\n        description: result.combinedExamples,\n        meta: `Code ${result.nocCode} -- Level ${result.nocLevel}`,\n      }} // Mapping makes the consuming resultRender not dump all the props on the DOM\n    )\n  }\n  return (\n    <OccupationSearch key='lunr' queryFn={queryFunc} />\n  );\n};\n\nTextSearch.propTypes = {\n  source: PropTypes.array.isRequired,\n}\n\nexport default TextSearch;"],"sourceRoot":""}